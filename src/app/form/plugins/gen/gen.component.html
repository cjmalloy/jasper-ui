@if (plugins && plugin) {
  <label>{{ plugin.config?.submitChild || plugin.name || plugin.tag }}</label>
  @if (group) {
    <div *ngIf="children.length" class="ribbon-margin" [style.margin-bottom.px]="childrenOn * 20"></div>
    <formly-form *ngIf="plugin.config!.form"
                 class="form plugin-content"
                 [model]="model"
                 [form]="group"
                 [fields]="plugin.config!.form"
                 [options]="options"></formly-form>
    <details *ngIf="plugin.config!.advancedForm"
             class="advanced"
             [class.mini]="!plugin.config!.form">
      <summary *ngIf="plugin.config!.form"><span i18n>Advanced</span></summary>
      <summary *ngIf="!plugin.config!.form" i18n-title title="Advanced"><span></span></summary>
      <formly-form class="form plugin-content"
                   [model]="model"
                   [form]="group"
                   [fields]="plugin.config!.advancedForm"
                   [options]="options"></formly-form>
    </details>
  }
  <ng-container *ngFor="let child of children">
    <ng-container *ngIf="plugins.contains(child.tag)">
      <hr>
      <div>
        <app-form-gen [plugins]="plugins" [plugin]="child"></app-form-gen>
      </div>
    </ng-container>
  </ng-container>
}

<div class="floating-ribbons">
  <div *ngFor="let child of children"
       class="icon {{ cssClass(child.tag) }}"
       [class.on]="plugins.contains(child.tag)"
       (click)="toggleChild(child.tag)"><span>{{ child.config?.submitChild }}</span></div>
</div>
