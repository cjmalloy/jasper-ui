<ng-container *mobxAutorun>
  @if (store.view.ref) {
    @if (store.account.signedIn) {
      <app-comment-reply [to]="store.view.ref"
                         quote=""
                         [tags]="replyTags"
                         (save)="newComments$.next($event)"></app-comment-reply>
    }
    <app-comment-thread [source]="store.view.url"
                        [newComments$]="newComments$"
                        [scrollToLatest]="true"
                        [depth]="depth"></app-comment-thread>
    @if (thread.hasMore) {
      <span class="fake-link load-more" (click)="thread.loadMore()" i18n>
          load more comments
        </span>
    }
  } @else {
    <app-loading></app-loading>
  }
</ng-container>
