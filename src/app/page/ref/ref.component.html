<ng-container *mobxAutorun>
  <div #tabs class="tabs">
    <a class="logo" routerLink="/"></a>
    <h5></h5>
    <a routerLink="." [queryParams]="{origin: store.view.origin}" [class.current-tab]="store.view.summary"
       i18n-title title="Summary View"
       i18n>view</a>
    <ng-container *ngIf="store.view.ref?.created">
      <ng-container *ngIf="store.view.current === 'ref/comments' || comments">
        <h5 *ngIf="store.view.current === 'ref/comments'" class="print-inline" i18n>Comments</h5>
        <a routerLink="comments" [queryParams]="{origin: store.view.origin}" routerLinkActive="current-tab"
           i18n-title title="Comments"
           i18n>comments</a>
      </ng-container>
      <ng-container *ngIf="store.view.current === 'ref/thread' || threads">
        <h5 *ngIf="store.view.current === 'ref/thread'" class="print-inline" i18n>Thread</h5>
        <a routerLink="thread" [queryParams]="{origin: store.view.origin}" routerLinkActive="current-tab"
           i18n-title title="Threads"
           i18n>threads</a>
      </ng-container>
      <ng-container *ngIf="store.view.current === 'ref/responses' || responses">
        <h5 *ngIf="store.view.current === 'ref/responses'" class="print-inline" i18n>Responses</h5>
        <a routerLink="responses" [queryParams]="{origin: store.view.origin}" routerLinkActive="current-tab"
           i18n-title title="Responses"
           i18n>responses</a>
      </ng-container>
      <ng-container *ngIf="store.view.current === 'ref/sources' || sources">
        <h5 *ngIf="store.view.current === 'ref/sources'" class="print-inline" i18n>Sources</h5>
        <a routerLink="sources" [queryParams]="{origin: store.view.origin}" routerLinkActive="current-tab"
           i18n-title title="Sources"
           i18n>sources</a>
      </ng-container>
      <ng-container *ngIf="alts">
        <h5 *ngIf="store.view.alternateUrls" class="print-inline" i18n>Alternate URLs</h5>
        <a routerLink="alts" [queryParams]="{origin: store.view.origin}" routerLinkActive="current-tab"
           i18n-title title="Alternate URLs"
           i18n>alts</a>
      </ng-container>
      <ng-container *ngIf="store.view.current === 'ref/versions' || store.view.versions > 1">
        <h5 *ngIf="store.view.current === 'ref/versions'" class="print-inline" i18n>Versions</h5>
        <a routerLink="versions" [queryParams]="{origin: store.view.origin}" routerLinkActive="current-tab"
           i18n-title title="Versions"
           i18n>versions</a>
      </ng-container>
      <app-mobile-tab-select [tabs]="tabs"></app-mobile-tab-select>
    </ng-container>
    <app-settings></app-settings>
  </div>
  <app-sidebar></app-sidebar>
  <ng-container *ngIf="store.view.ref else loading">
    <app-ref class="full-page"
             [ref]="store.view.ref"
             [showToggle]="true"
             [expandInline]="!config.mobile"
             [expanded]="expandedOnload && store.local.isRefToggled(store.view.url, store.view.origin, !!store.view.ref.comment)"
             (copied)="reload()"></app-ref>
    <div *ngIf="refWarning"
         class="warning" i18n>
      * Published date was changed to be after source published date.
    </div>
    <ng-container *ngIf="!store.view.ref?.created">
      <div class="stack">
        <div class="error-404" i18n>Not Found</div>
        <ng-container *ngIf="store.account.signedIn">
          <div *ngIf="!store.view.isTextPost && !isWiki(store.view.url)" class="error-404 submit-button" routerLink="/submit" [queryParams]="{ url: store.view.url }" i18n>
            ğŸ”— Submit Link
          </div>
          <div *ngIf="store.view.isTextPost" class="error-404 submit-button" routerLink="/submit/text" [queryParams]="{ url: store.view.url }" i18n>
            ğŸ“ Submit Text Post
          </div>
          <div *ngIf="isWiki(store.view.url)" class="error-404 submit-button" routerLink="/submit/text" [queryParams]="{ url: store.view.url }" i18n>
            ğŸ“” &nbsp; Submit Wiki
          </div>
        </ng-container>
      </div>
    </ng-container>
  </ng-container>
  <ng-template #loading>
    <app-loading></app-loading>
  </ng-template>
  <ng-container *ngIf="store.view.ref?.created">
    <hr>
    <router-outlet></router-outlet>
  </ng-container>
</ng-container>
