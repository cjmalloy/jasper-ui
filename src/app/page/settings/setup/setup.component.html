<form class="form" [formGroup]="adminForm" (ngSubmit)="install()">
  <span><!-- Title --></span>
  <h3 i18n>Install Plugins and Templates</h3>
  <span><!-- Description --></span>
  <p i18n>
    Quickly turn on and off templates bundled with this client.
    Visit the <a routerLink="../plugin">plugins</a> or
    <a routerLink="../template">templates</a> settings page to manage all
    plugins and templates.
  </p>
  <span i18n>Plugins:</span>
  <div formGroupName="plugins">
    <div *ngFor="let plugin of admin.def.plugins | keyvalue">
      <input id="plugin-{{ plugin.key }}" type="checkbox" [formControlName]="$any(plugin.key)">
      <label for="plugin-{{ plugin.key }}">{{ plugin.value.name || plugin.key }}</label>
      <span *ngIf="needsPluginUpdate(plugin.key)" class="update">
        (<span class="fake-link" (click)="updatePlugin(plugin.key)" i18n>update</span>)
      </span>
    </div>
  </div>

  <span i18n>Templates:</span>
  <div formGroupName="templates">
    <div *ngFor="let template of admin.def.templates | keyvalue">
      <input id="template-{{ template.key }}" type="checkbox" [formControlName]="$any(template.key)">
      <label for="template-{{ template.key }}">{{ template.value.name || template.key }}</label>
      <span *ngIf="needsTemplateUpdate(template.key)" class="update">
        (<span class="fake-link" (click)="updateTemplate(template.key)" i18n>update</span>)
      </span>
    </div>
  </div>

  <ng-container *ngFor="let e of serverError">
    <span><!-- Unexpected Error --></span>
    <div class="error">{{ e }}</div>
  </ng-container>

  <span><!-- Buttons --></span>
  <span class="form-array right">
    <button type="button" (click)="selectAll()" *ngIf="selectAllToggle" i18n>Select None</button>
    <button type="button" (click)="selectAll()" *ngIf="!selectAllToggle" i18n>Select All</button>
    <button type="submit" [disabled]="submitted && !adminForm.valid" i18n>Save</button>
  </span>

  <ng-container *ngFor="let i of installMessages">
    <span><!-- Progress Log --></span>
    <div>{{ i }}</div>
  </ng-container>
</form>
