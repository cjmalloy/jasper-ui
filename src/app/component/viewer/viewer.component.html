<app-ref *ngIf="repost"
         class="expand"
         [fetchRepost]="false"
         [showToggle]="true"
         [expandInline]="true"
         [ref]="repost"></app-ref>
<iframe #iframe
        *ngIf="currentTags.includes('plugin/embed')"
        [class.ready]="oembed"
        src="about:blank"
        frameborder="0"
        scrolling="yes"
        allow="fullscreen; accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen></iframe>
<div *ngIf="image || currentTags.includes('plugin/image')"
     class="image-expand"
     [appImageDim]="image || ref?.plugins?.['plugin/image']?.url || ref?.url"
     [defaultWidth]="ref?.plugins?.['plugin/image']?.width"
     [defaultHeight]="ref?.plugins?.['plugin/image']?.height"
     appResize></div>
<video *ngIf="currentTags.includes('plugin/video')"
       class="video-expand"
       autoplay
       controls
       appResize>
  <source [src]="ref?.plugins?.['plugin/video']?.url || ref?.url">
</video>
<audio *ngIf="currentTags.includes('plugin/audio')"
       class="audio-expand"
       autoplay
       controls>
  <source [src]="ref?.plugins?.['plugin/audio']?.url || ref?.url">
</audio>
<app-chart *ngIf="currentTags.includes('plugin/chart')"
           [ref]="ref"></app-chart>
<app-qr *ngIf="currentTags.includes('plugin/qr')"
        [url]="ref?.plugins?.['plugin/qr']?.url || ref?.url"
        appResize></app-qr>
<app-md *ngIf="currentText && !currentTags.includes('plugin/chart')"
        [origin]="ref?.origin"
        [text]="currentText"
        [plugins]="currentTags"></app-md>
<ng-container *ngFor="let ui of uis">
  <div [appPluginUi]="ui"
       [ref]="ref"></div>
</ng-container>
