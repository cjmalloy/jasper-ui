import { DateTime } from 'luxon';
import { Plugin } from '../model/plugin';
import { Mod } from '../model/tag';

const geoPlugin: Plugin = {
  tag: 'plugin/geo',
  name: $localize`ğŸŒï¸ Geo`,
  config: {
    type: 'lens',
    mod: $localize`ğŸŒï¸ Geo`,
    default: true,
    generated: $localize`Generated by jasper-ui ${DateTime.now().toISO()}`,
    icons: [{ label: $localize`ğŸ—ºï¸` }],
    filters: [
      { query: 'plugin/geo', label: $localize`ğŸ—ºï¸ geo`, group: $localize`Geography ğŸŒï¸` },
    ],
    description: $localize`A GeoJSON Feature.`,
  },
};

const geoPointPlugin: Plugin = {
  tag: 'plugin/geo/point',
  name: $localize`ğŸŒï¸ğŸ“ï¸ Geo Point`,
  config: {
    type: 'lens',
    mod: $localize`ğŸŒï¸ Geo`,
    default: true,
    generated: $localize`Generated by jasper-ui ${DateTime.now().toISO()}`,
    icons: [{ label: $localize`ğŸ“ï¸` }],
    filters: [
      { query: 'plugin/geo/point', label: $localize`ğŸ“ï¸ point`, group: $localize`Geography ğŸŒï¸` },
    ],
    description: $localize`A GeoJSON Point.`,
    form: [{
      key: 'geometry.coordinates',
      type: 'location',
      props: {
        label: $localize`Location: `,
      },
    }],
  },
  defaults: {
    type: 'Feature',
    geometry: {
      type: 'Point',
      coordinates: [0, 0],
    }
  },
  schema: {
    optionalProperties: {
      bb: { elements: { type: 'int32' } } ,
    },
    properties: {
      type: { enum: ['Feature'] },
      geometry: {
        properties: {
          type: { enum: ['Point'] },
          coordinates: { elements: { type: 'int32' } },
        },
      }
    },
  },
};

const geoLineStringPlugin: Plugin = {
  tag: 'plugin/geo/linestring',
  name: $localize`ğŸŒï¸ğŸ“Œï¸ğŸ“Œï¸ Geo Line String`,
  config: {
    type: 'lens',
    mod: $localize`ğŸŒï¸ Geo`,
    generated: $localize`Generated by jasper-ui ${DateTime.now().toISO()}`,
    icons: [{ label: $localize`ğŸ“Œï¸ğŸ“Œï¸` }],
    filters: [
      { query: 'plugin/geo/linestring', label: $localize`ğŸ“Œï¸ğŸ“Œï¸ line string`, group: $localize`Geography ğŸŒï¸` },
    ],
    description: $localize`A GeoJSON LineString.`,
  },
  defaults: {
    type: 'Feature',
    geometry: {
      type: 'LineString',
      coordinates: [],
    }
  },
  schema: {
    optionalProperties: {
      bb: { elements: { type: 'int32' } } ,
    },
    properties: {
      type: { enum: ['Feature'] },
      geometry: {
        properties: {
          type: { enum: ['LineString'] },
          coordinates: { elements: { elements: { type: 'int32' } } },
        },
      }
    },
  },
};

const geoPolygonPlugin: Plugin = {
  tag: 'plugin/geo/polygon',
  name: $localize`ğŸŒï¸ğŸ”·ï¸ Geo Polygon`,
  config: {
    type: 'lens',
    mod: $localize`ğŸŒï¸ Geo`,
    default: true,
    generated: $localize`Generated by jasper-ui ${DateTime.now().toISO()}`,
    icons: [{ label: $localize`ğŸ”·ï¸` }],
    filters: [
      { query: 'plugin/geo/polygon', label: $localize`ğŸ”·ï¸ polygon`, group: $localize`Geography ğŸŒï¸` },
    ],
    description: $localize`A GeoJSON Polygon.`,
  },
  defaults: {
    type: 'Feature',
    geometry: {
      type: 'Polygon',
      coordinates: [],
    }
  },
  schema: {
    optionalProperties: {
      bb: { elements: { type: 'int32' } } ,
    },
    properties: {
      type: { enum: ['Feature'] },
      geometry: {
        properties: {
          type: { enum: ['Polygon'] },
          coordinates: { elements: { elements: { elements: { type: 'int32' } } } },
        },
      }
    },
  },
};

const geoMultiPointPlugin: Plugin = {
  tag: 'plugin/geo/multipoint',
  name: $localize`ğŸŒï¸ğŸ“ï¸ğŸ“ï¸ Geo Multi Point`,
  config: {
    type: 'lens',
    mod: $localize`ğŸŒï¸ Geo`,
    generated: $localize`Generated by jasper-ui ${DateTime.now().toISO()}`,
    icons: [{ label: $localize`ğŸ“ï¸ğŸ“ï¸` }],
    filters: [
      { query: 'plugin/geo/multipoint', label: $localize`ğŸ“ï¸ğŸ“ï¸ multi point`, group: $localize`Geography ğŸŒï¸` },
    ],
    description: $localize`A GeoJSON MultiPoint.`,
  },
  defaults: {
    type: 'Feature',
    geometry: {
      type: 'MultiPoint',
      coordinates: [[]],
    }
  },
  schema: {
    optionalProperties: {
      bb: { elements: { type: 'int32' } } ,
    },
    properties: {
      type: { enum: ['Feature'] },
      geometry: {
        properties: {
          type: { enum: ['MultiPoint'] },
          coordinates: { elements: { elements: { type: 'int32' } } },
        },
      }
    },
  },
};

const geoMultiLineStringPlugin: Plugin = {
  tag: 'plugin/geo/multilinestring',
  name: $localize`ğŸŒï¸ğŸ“Œï¸ğŸ“Œï¸ğŸ“Œï¸ Geo Multi Line String`,
  config: {
    type: 'lens',
    mod: $localize`ğŸŒï¸ Geo`,
    generated: $localize`Generated by jasper-ui ${DateTime.now().toISO()}`,
    icons: [{ label: $localize`ğŸ“Œï¸ğŸ“Œï¸ğŸ“Œï¸` }],
    filters: [
      { query: 'plugin/geo/multilinestring', label: $localize`ğŸ“Œï¸ğŸ“Œï¸ğŸ“Œï¸ multi line string`, group: $localize`Geography ğŸŒï¸` },
    ],
    description: $localize`A GeoJSON MultiLineString.`,
  },
  defaults: {
    type: 'Feature',
    geometry: {
      type: 'MultiLineString',
      coordinates: [],
    }
  },
  schema: {
    optionalProperties: {
      bb: { elements: { type: 'int32' } } ,
    },
    properties: {
      type: { enum: ['Feature'] },
      geometry: {
        properties: {
          type: { enum: ['MultiLineString'] },
          coordinates: { elements: { elements: { elements: { type: 'int32' } } } },
        },
      }
    },
  },
};

const geoMultiPolygonPlugin: Plugin = {
  tag: 'plugin/geo/multipolygon',
  name: $localize`ğŸŒï¸ğŸ”·ï¸ğŸ”·ï¸ Geo Multi Polygon`,
  config: {
    type: 'lens',
    mod: $localize`ğŸŒï¸ Geo`,
    generated: $localize`Generated by jasper-ui ${DateTime.now().toISO()}`,
    icons: [{ label: $localize`ğŸ”·ï¸ğŸ”·ï¸` }],
    filters: [
      { query: 'plugin/geo/multipolygon', label: $localize`ğŸ”·ï¸ğŸ”·ï¸ multi polygon`, group: $localize`Geography ğŸŒï¸` },
    ],
    description: $localize`A GeoJSON MultiPolygon.`,
  },
  defaults: {
    type: 'Feature',
    geometry: {
      type: 'MultiPolygon',
      coordinates: [],
    }
  },
  schema: {
    optionalProperties: {
      bb: { elements: { type: 'int32' } } ,
    },
    properties: {
      type: { enum: ['Feature'] },
      geometry: {
        properties: {
          type: { enum: ['MultiPolygon'] },
          coordinates: { elements: { elements: { elements: { elements: { type: 'int32' } } } } },
        },
      }
    },
  },
};



export const geoMod: Mod = {
  plugin: [
    geoPlugin,
    geoPointPlugin,
    geoLineStringPlugin,
    geoPolygonPlugin,
    geoMultiPointPlugin,
    geoMultiLineStringPlugin,
    geoMultiPolygonPlugin,
  ]
};
