import * as moment from 'moment';
import { Plugin } from '../model/plugin';
import { Ref } from '../model/ref';

export const deletePlugin: Plugin = {
  tag: 'plugin/delete',
  name: $localize`ğŸ—‘ï¸ Delete Notice`,
  config: {
    type: 'core',
    generated: $localize`Generated by jasper-ui ${moment().toISOString()}`,
    description: $localize`Activates built-in delete notice support and clears refs marks them as deleted instead of actually deleting them.`,
    icons: [{ label: $localize`ğŸ—‘ï¸` }],
    filters: [
      { query: 'plugin/delete', label: $localize`ğŸ—‘ï¸ deleted`, group: $localize`Plugins ğŸ§°ï¸` },
    ],
  },
};

export function deleteNotice(ref: Ref): Ref {
  return {
    url: ref.url,
    origin: ref.origin,
    tags: ['plugin/delete', 'internal'],
    created: ref.created,
    published: ref.published,
    modifiedString: ref.modifiedString,
  };
}
